高级WEB HW2 ：Spring实现rest
============================
REST简介
--------
REST 描述了一个架构样式的互联系统（如Web应用程序）。REST约束条件作为一个整体应用时，将生成一个简单、可扩展、有效、安全、可靠的架构。由于它简便、轻量级以及通过 HTTP 直接传输数据的特性，RESTful Web服务成为基于SOAP服务的一个最有前途的替代方案。用于web服务和动态Web应用程序的多层架构可以实现可重用性、简单性、可扩展性和组件可响应性的清晰分离。Web 应用程序最重要的 REST 原则是，客户端和服务器之间的交互在请求之间是无状态的。从客户端到服务器的每个请求都必须包含理解请求所必需的信息。如果服务器在请求之间的任何时间点重启，客户端不会得到通知。此外，无状态请求可以由任何可用服务器回答，这十分适合云计算之类的环境。客户端可以缓存数据以改进性能。

REST几个关键点
--------------
###1.满足以下的Constraints:
`Client–server`  
`Stateless`  
`Cacheable`  
`Layered system`  
`Code on demand (optional)`  
`Uniform interface`
###2.设计接口时候的原则
`Identification of resources`  
`Manipulation of resources through these representations`  
`Self-descriptive messages`  
`Hypermedia as the engine of application state`
###3.Rest希望实现的目标
`Scalability of component interactions`  
`Generality of interfaces`  
`Independent deployment of components`  
`Intermediary components to reduce latency, enforce security and encapsulate legacy systems` 
###4.Rest对于我们来说
`Every Things is a Resource.`   
`Every Resouce has a ID.`   
`We Can Use Http Meothod(Get/Post/Put/Delete) Handle Resource.`

Spring实现
----------

###1.Controller

	@Controller
	@RequestMapping(value = "/rest", method = RequestMethod.GET)
	public class RestController {

		@Autowired
		UserService userService;

		@RequestMapping(value = "/user/{id}", method = RequestMethod.GET)
		public UserInfo show(@PathVariable int id, HttpServletRequest request,
				HttpServletResponse response) throws Exception {
			return userService.getUserInfo(id);

		}

		@RequestMapping(value = "/user/list", method = RequestMethod.GET)
		public ListBean getAll() throws Exception {
			return userService.getAllUsers();

		}

	}
增删改查分别修改"method "以对应Http的四种方法(Post,Delete,Put,Get)就好了.变量直接通过@PathVariable 就可以拿到.

###2.web.xml配置
	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>/WEB-INF/rest-servlet.xml</param-value>
	</context-param>
	<filter>
		<filter-name>CharacterEncodingFilter</filter-name>
		<filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
		<init-param>
			<param-name>encoding</param-name>
			<param-value>UTF-8</param-value>
		</init-param>
	</filter>
	<filter-mapping>
		<filter-name>CharacterEncodingFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>
	<listener>
		<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
	</listener>
	<servlet>  
		<!-- 配置一个Servlet，有这个Servlet统一调度页面的请求 -->  
		<servlet-name>rest</servlet-name>  
		<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>  
		<load-on-startup>2</load-on-startup>  
	</servlet>  
	<servlet-mapping>  
        <!-- 映射路径，不要写成了/*那样会拦截所有的访问，连JSP页面都访问不了 -->  
		<servlet-name>rest</servlet-name>  
		<url-pattern>/</url-pattern>  
	</servlet-mapping>  

###3.rest-servlet.xml配置
	<!--检测注解-->  
	<context:component-scan base-package="com.taoye" />  
	<bean   class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />  
	<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />  

	<bean id="dateFormat" class="java.text.SimpleDateFormat">
		<constructor-arg value="yyyy-MM-dd" />
	</bean>

	<bean name="defaultUserBean" class="com.taoye.dto.UserInfo">
		<property name="userName" value="匿名"></property>
		<property name="salary" value="1000.00"></property>
		<property name="vip" value="false"></property>
		<property name="id" value="-1"></property>
		<property name="birthday">
			<bean factory-bean="dateFormat" factory-method="parse">
				<constructor-arg value="2016-06-16" />
			</bean>
		</property>
	</bean>
	<bean
		class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
		<property name="order" value="1" />
		<property name="favorParameter" value="false" />
		<property name="ignoreAcceptHeader" value="true" />
		<property name="defaultContentType" value="text/html" />
		<property name="mediaTypes">
			<map>
				<entry key="xml" value="application/xml" />
			</map>
		</property>
		<property name="viewResolvers">
			<list>
				<bean class="org.springframework.web.servlet.view.BeanNameViewResolver" />
				<bean
					class="org.springframework.web.servlet.view.InternalResourceViewResolver">
					<property name="prefix" value="/" />
					<property name="suffix" value=".jsp" />
				</bean>
			</list>
		</property>
		<property name="defaultViews">
			<list>
				<bean id="xmlView"
					class="org.springframework.web.servlet.view.xml.MarshallingView">
					<constructor-arg>
						<bean class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
							<property name="classesToBeBound">
								<list>
									<value>com.taoye.dto.UserInfo</value>
									<value>com.taoye.dto.ListBean</value>
								</list>
							</property>
						</bean>
					</constructor-arg>
				</bean>
			</list>
		</property>
	</bean>

